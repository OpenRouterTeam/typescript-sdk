/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import dotenv from 'dotenv';

dotenv.config();

/**
 * Example usage of the @openrouter/sdk SDK
 *
 * To run this example from the examples directory:
 * npm run build && npx tsx betaResponsesSend.example.ts
 */

import type { OpenResponsesEasyInputMessage } from '../src/models';

import { OpenRouter } from '../src/index.js';

const openRouter = new OpenRouter({
  apiKey: process.env['OPENROUTER_API_KEY'] ?? '',
});

const text = 'Hello! What is your name?';
const responsesMessages: OpenResponsesEasyInputMessage[] = [
  {
    type: 'message',
    role: 'user',
    content: [
      {
        type: 'input_text',
        text: 'What is your name?',
      },
    ],
  },
];

const supportedInputSchemas = [
  text,
  responsesMessages,
];

for (const input of supportedInputSchemas) {
  const result = await openRouter.callModel({
    instructions: 'You are a helpful assistant. Your name is Mark',
    model: 'openai/gpt-4',
    input: input,
  });

  // get resulting output each time in...

  // text format
  console.log(await result.getText());

  // response message format
  console.log(await result.getResponse().then((response) => response.output));

  // stream response message format
  console.log(await result.getFullResponsesStream());

  // stream text format
  console.log(await result.getTextStream());

  // stream just the messages (simpler than full response but more than just text)
  console.log(await result.getNewMessagesStream());

  // stream tool calls... (structured tool calls with parsed arguments)
  console.log(await result.getToolCallsStream());

  // get all tool calls... (structured tool calls with parsed arguments)
  console.log(await result.getToolCalls());
}
