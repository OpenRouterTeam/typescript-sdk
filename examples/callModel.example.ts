/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import dotenv from "dotenv";
dotenv.config();
/**
 * Example usage of the @openrouter/sdk SDK
 *
 * To run this example from the examples directory:
 * npm run build && npx tsx betaResponsesSend.example.ts
 */

import { OpenRouter } from "../src/index.js";
import { Message, OpenResponsesEasyInputMessage } from "../src/models";

import { MessageParam as AnthropicClaudeMessage } from "@anthropic-ai/sdk/resources/messages";

const openRouter = new OpenRouter({
  apiKey: process.env["OPENROUTER_API_KEY"] ?? "",
});

const chatMessages: Message[] = [
  {
    role: "user",
    content: "Hello! What is your name?",
  },
];
const text = "Hello! What is your name?";
const responsesMessages: OpenResponsesEasyInputMessage[] = [
  {
    type: "message",
    role: "user",
    content: [
      {
        type: "input_text",
        text: "What is your name?",
      },
    ],
  },
];

const anthropicClaudeMessages: AnthropicClaudeMessage[] = [
  {
    role: "user",
    content: "Hello! What is your name?",
  },
];

const supportedInputSchemas = [
  chatMessages,
  text,
  responsesMessages,
  anthropicClaudeMessages,
];

for (const input of supportedInputSchemas) {
  const result = await openRouter.callModel({
    instructions: "You are a helpful assistant. Your name is Mark",
    model: "openai/gpt-4",
    input: input,
  });

  // get resulting output each time in...

  // text format
  console.log(await result.getText());

  // chat message format (was names getMessage)
  console.log(await result.getChatMessage());

  // response message format
  console.log(await result.getResponse().then((response) => response.output));

  // AnthropicClaude message format
  console.log(await result.getClaudeMessage());

  // stream response message format
  console.log(await result.getFullResponsesStream());

  // stream text format
  console.log(await result.getTextStream());

  // stream chat message format
  console.log(await result.getNewChatMessagesStream());

  // stream response message format
  console.log(await result.getFullResponsesStream());
}
