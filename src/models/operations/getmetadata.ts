/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type GetMetadataRequest = {
  id: string;
};

/**
 * Type of API used for the generation
 */
export const ApiType = {
  Completions: "completions",
  Embeddings: "embeddings",
} as const;
/**
 * Type of API used for the generation
 */
export type ApiType = ClosedEnum<typeof ApiType>;

/**
 * Generation data
 */
export type GetMetadataData = {
  /**
   * Unique identifier for the generation
   */
  id: string;
  /**
   * Upstream provider's identifier for this generation
   */
  upstreamId: string | null;
  /**
   * Total cost of the generation in USD
   */
  totalCost: number;
  /**
   * Discount applied due to caching
   */
  cacheDiscount: number | null;
  /**
   * Cost charged by the upstream provider
   */
  upstreamInferenceCost: number | null;
  /**
   * ISO 8601 timestamp of when the generation was created
   */
  createdAt: string;
  /**
   * Model used for the generation
   */
  model: string;
  /**
   * ID of the app that made the request
   */
  appId: number | null;
  /**
   * Whether the response was streamed
   */
  streamed: boolean | null;
  /**
   * Whether the generation was cancelled
   */
  cancelled: boolean | null;
  /**
   * Name of the provider that served the request
   */
  providerName: string | null;
  /**
   * Total latency in milliseconds
   */
  latency: number | null;
  /**
   * Moderation latency in milliseconds
   */
  moderationLatency: number | null;
  /**
   * Time taken for generation in milliseconds
   */
  generationTime: number | null;
  /**
   * Reason the generation finished
   */
  finishReason: string | null;
  /**
   * Number of tokens in the prompt
   */
  tokensPrompt: number | null;
  /**
   * Number of tokens in the completion
   */
  tokensCompletion: number | null;
  /**
   * Native prompt tokens as reported by provider
   */
  nativeTokensPrompt: number | null;
  /**
   * Native completion tokens as reported by provider
   */
  nativeTokensCompletion: number | null;
  /**
   * Native completion image tokens as reported by provider
   */
  nativeTokensCompletionImages: number | null;
  /**
   * Native reasoning tokens as reported by provider
   */
  nativeTokensReasoning: number | null;
  /**
   * Native cached tokens as reported by provider
   */
  nativeTokensCached: number | null;
  /**
   * Number of media items in the prompt
   */
  numMediaPrompt: number | null;
  /**
   * Number of media items in the completion
   */
  numMediaCompletion: number | null;
  /**
   * Number of search results included
   */
  numSearchResults: number | null;
  /**
   * Origin URL of the request
   */
  origin: string;
  /**
   * Usage amount in USD
   */
  usage: number;
  /**
   * Whether this used bring-your-own-key
   */
  isByok: boolean;
  /**
   * Native finish reason as reported by provider
   */
  nativeFinishReason: string | null;
  /**
   * External user identifier
   */
  externalUser: string | null;
  /**
   * Type of API used for the generation
   */
  apiType: ApiType | null;
};

/**
 * Returns the request metadata for this generation
 */
export type GetMetadataResponse = {
  /**
   * Generation data
   */
  data: GetMetadataData;
};

/** @internal */
export const GetMetadataRequest$inboundSchema: z.ZodType<
  GetMetadataRequest,
  z.ZodTypeDef,
  unknown
> = z.object({
  id: z.string(),
});

/** @internal */
export type GetMetadataRequest$Outbound = {
  id: string;
};

/** @internal */
export const GetMetadataRequest$outboundSchema: z.ZodType<
  GetMetadataRequest$Outbound,
  z.ZodTypeDef,
  GetMetadataRequest
> = z.object({
  id: z.string(),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace GetMetadataRequest$ {
  /** @deprecated use `GetMetadataRequest$inboundSchema` instead. */
  export const inboundSchema = GetMetadataRequest$inboundSchema;
  /** @deprecated use `GetMetadataRequest$outboundSchema` instead. */
  export const outboundSchema = GetMetadataRequest$outboundSchema;
  /** @deprecated use `GetMetadataRequest$Outbound` instead. */
  export type Outbound = GetMetadataRequest$Outbound;
}

export function getMetadataRequestToJSON(
  getMetadataRequest: GetMetadataRequest,
): string {
  return JSON.stringify(
    GetMetadataRequest$outboundSchema.parse(getMetadataRequest),
  );
}

export function getMetadataRequestFromJSON(
  jsonString: string,
): SafeParseResult<GetMetadataRequest, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GetMetadataRequest$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GetMetadataRequest' from JSON`,
  );
}

/** @internal */
export const ApiType$inboundSchema: z.ZodNativeEnum<typeof ApiType> = z
  .nativeEnum(ApiType);

/** @internal */
export const ApiType$outboundSchema: z.ZodNativeEnum<typeof ApiType> =
  ApiType$inboundSchema;

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace ApiType$ {
  /** @deprecated use `ApiType$inboundSchema` instead. */
  export const inboundSchema = ApiType$inboundSchema;
  /** @deprecated use `ApiType$outboundSchema` instead. */
  export const outboundSchema = ApiType$outboundSchema;
}

/** @internal */
export const GetMetadataData$inboundSchema: z.ZodType<
  GetMetadataData,
  z.ZodTypeDef,
  unknown
> = z.object({
  id: z.string(),
  upstream_id: z.nullable(z.string()),
  total_cost: z.number(),
  cache_discount: z.nullable(z.number()),
  upstream_inference_cost: z.nullable(z.number()),
  created_at: z.string(),
  model: z.string(),
  app_id: z.nullable(z.number()),
  streamed: z.nullable(z.boolean()),
  cancelled: z.nullable(z.boolean()),
  provider_name: z.nullable(z.string()),
  latency: z.nullable(z.number()),
  moderation_latency: z.nullable(z.number()),
  generation_time: z.nullable(z.number()),
  finish_reason: z.nullable(z.string()),
  tokens_prompt: z.nullable(z.number()),
  tokens_completion: z.nullable(z.number()),
  native_tokens_prompt: z.nullable(z.number()),
  native_tokens_completion: z.nullable(z.number()),
  native_tokens_completion_images: z.nullable(z.number()),
  native_tokens_reasoning: z.nullable(z.number()),
  native_tokens_cached: z.nullable(z.number()),
  num_media_prompt: z.nullable(z.number()),
  num_media_completion: z.nullable(z.number()),
  num_search_results: z.nullable(z.number()),
  origin: z.string(),
  usage: z.number(),
  is_byok: z.boolean(),
  native_finish_reason: z.nullable(z.string()),
  external_user: z.nullable(z.string()),
  api_type: z.nullable(ApiType$inboundSchema),
}).transform((v) => {
  return remap$(v, {
    "upstream_id": "upstreamId",
    "total_cost": "totalCost",
    "cache_discount": "cacheDiscount",
    "upstream_inference_cost": "upstreamInferenceCost",
    "created_at": "createdAt",
    "app_id": "appId",
    "provider_name": "providerName",
    "moderation_latency": "moderationLatency",
    "generation_time": "generationTime",
    "finish_reason": "finishReason",
    "tokens_prompt": "tokensPrompt",
    "tokens_completion": "tokensCompletion",
    "native_tokens_prompt": "nativeTokensPrompt",
    "native_tokens_completion": "nativeTokensCompletion",
    "native_tokens_completion_images": "nativeTokensCompletionImages",
    "native_tokens_reasoning": "nativeTokensReasoning",
    "native_tokens_cached": "nativeTokensCached",
    "num_media_prompt": "numMediaPrompt",
    "num_media_completion": "numMediaCompletion",
    "num_search_results": "numSearchResults",
    "is_byok": "isByok",
    "native_finish_reason": "nativeFinishReason",
    "external_user": "externalUser",
    "api_type": "apiType",
  });
});

/** @internal */
export type GetMetadataData$Outbound = {
  id: string;
  upstream_id: string | null;
  total_cost: number;
  cache_discount: number | null;
  upstream_inference_cost: number | null;
  created_at: string;
  model: string;
  app_id: number | null;
  streamed: boolean | null;
  cancelled: boolean | null;
  provider_name: string | null;
  latency: number | null;
  moderation_latency: number | null;
  generation_time: number | null;
  finish_reason: string | null;
  tokens_prompt: number | null;
  tokens_completion: number | null;
  native_tokens_prompt: number | null;
  native_tokens_completion: number | null;
  native_tokens_completion_images: number | null;
  native_tokens_reasoning: number | null;
  native_tokens_cached: number | null;
  num_media_prompt: number | null;
  num_media_completion: number | null;
  num_search_results: number | null;
  origin: string;
  usage: number;
  is_byok: boolean;
  native_finish_reason: string | null;
  external_user: string | null;
  api_type: string | null;
};

/** @internal */
export const GetMetadataData$outboundSchema: z.ZodType<
  GetMetadataData$Outbound,
  z.ZodTypeDef,
  GetMetadataData
> = z.object({
  id: z.string(),
  upstreamId: z.nullable(z.string()),
  totalCost: z.number(),
  cacheDiscount: z.nullable(z.number()),
  upstreamInferenceCost: z.nullable(z.number()),
  createdAt: z.string(),
  model: z.string(),
  appId: z.nullable(z.number()),
  streamed: z.nullable(z.boolean()),
  cancelled: z.nullable(z.boolean()),
  providerName: z.nullable(z.string()),
  latency: z.nullable(z.number()),
  moderationLatency: z.nullable(z.number()),
  generationTime: z.nullable(z.number()),
  finishReason: z.nullable(z.string()),
  tokensPrompt: z.nullable(z.number()),
  tokensCompletion: z.nullable(z.number()),
  nativeTokensPrompt: z.nullable(z.number()),
  nativeTokensCompletion: z.nullable(z.number()),
  nativeTokensCompletionImages: z.nullable(z.number()),
  nativeTokensReasoning: z.nullable(z.number()),
  nativeTokensCached: z.nullable(z.number()),
  numMediaPrompt: z.nullable(z.number()),
  numMediaCompletion: z.nullable(z.number()),
  numSearchResults: z.nullable(z.number()),
  origin: z.string(),
  usage: z.number(),
  isByok: z.boolean(),
  nativeFinishReason: z.nullable(z.string()),
  externalUser: z.nullable(z.string()),
  apiType: z.nullable(ApiType$outboundSchema),
}).transform((v) => {
  return remap$(v, {
    upstreamId: "upstream_id",
    totalCost: "total_cost",
    cacheDiscount: "cache_discount",
    upstreamInferenceCost: "upstream_inference_cost",
    createdAt: "created_at",
    appId: "app_id",
    providerName: "provider_name",
    moderationLatency: "moderation_latency",
    generationTime: "generation_time",
    finishReason: "finish_reason",
    tokensPrompt: "tokens_prompt",
    tokensCompletion: "tokens_completion",
    nativeTokensPrompt: "native_tokens_prompt",
    nativeTokensCompletion: "native_tokens_completion",
    nativeTokensCompletionImages: "native_tokens_completion_images",
    nativeTokensReasoning: "native_tokens_reasoning",
    nativeTokensCached: "native_tokens_cached",
    numMediaPrompt: "num_media_prompt",
    numMediaCompletion: "num_media_completion",
    numSearchResults: "num_search_results",
    isByok: "is_byok",
    nativeFinishReason: "native_finish_reason",
    externalUser: "external_user",
    apiType: "api_type",
  });
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace GetMetadataData$ {
  /** @deprecated use `GetMetadataData$inboundSchema` instead. */
  export const inboundSchema = GetMetadataData$inboundSchema;
  /** @deprecated use `GetMetadataData$outboundSchema` instead. */
  export const outboundSchema = GetMetadataData$outboundSchema;
  /** @deprecated use `GetMetadataData$Outbound` instead. */
  export type Outbound = GetMetadataData$Outbound;
}

export function getMetadataDataToJSON(
  getMetadataData: GetMetadataData,
): string {
  return JSON.stringify(GetMetadataData$outboundSchema.parse(getMetadataData));
}

export function getMetadataDataFromJSON(
  jsonString: string,
): SafeParseResult<GetMetadataData, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GetMetadataData$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GetMetadataData' from JSON`,
  );
}

/** @internal */
export const GetMetadataResponse$inboundSchema: z.ZodType<
  GetMetadataResponse,
  z.ZodTypeDef,
  unknown
> = z.object({
  data: z.lazy(() => GetMetadataData$inboundSchema),
});

/** @internal */
export type GetMetadataResponse$Outbound = {
  data: GetMetadataData$Outbound;
};

/** @internal */
export const GetMetadataResponse$outboundSchema: z.ZodType<
  GetMetadataResponse$Outbound,
  z.ZodTypeDef,
  GetMetadataResponse
> = z.object({
  data: z.lazy(() => GetMetadataData$outboundSchema),
});

/**
 * @internal
 * @deprecated This namespace will be removed in future versions. Use schemas and types that are exported directly from this module.
 */
export namespace GetMetadataResponse$ {
  /** @deprecated use `GetMetadataResponse$inboundSchema` instead. */
  export const inboundSchema = GetMetadataResponse$inboundSchema;
  /** @deprecated use `GetMetadataResponse$outboundSchema` instead. */
  export const outboundSchema = GetMetadataResponse$outboundSchema;
  /** @deprecated use `GetMetadataResponse$Outbound` instead. */
  export type Outbound = GetMetadataResponse$Outbound;
}

export function getMetadataResponseToJSON(
  getMetadataResponse: GetMetadataResponse,
): string {
  return JSON.stringify(
    GetMetadataResponse$outboundSchema.parse(getMetadataResponse),
  );
}

export function getMetadataResponseFromJSON(
  jsonString: string,
): SafeParseResult<GetMetadataResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => GetMetadataResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'GetMetadataResponse' from JSON`,
  );
}
