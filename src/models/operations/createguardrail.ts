/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 5f0f56d14d79
 */

import * as z from "zod/v4";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import * as openEnums from "../../types/enums.js";
import { OpenEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

export type CreateGuardrailGlobals = {
  /**
   * The app identifier should be your app's URL and is used as the primary identifier for rankings.
   *
   * @remarks
   * This is used to track API usage per application.
   */
  httpReferer?: string | undefined;
  /**
   * The app display name allows you to customize how your app appears in OpenRouter's dashboard.
   *
   * @remarks
   */
  xTitle?: string | undefined;
};

/**
 * Interval at which the limit resets (daily, weekly, monthly)
 */
export const CreateGuardrailResetIntervalRequest = {
  Daily: "daily",
  Weekly: "weekly",
  Monthly: "monthly",
} as const;
/**
 * Interval at which the limit resets (daily, weekly, monthly)
 */
export type CreateGuardrailResetIntervalRequest = OpenEnum<
  typeof CreateGuardrailResetIntervalRequest
>;

export type CreateGuardrailRequestBody = {
  /**
   * Name for the new guardrail
   */
  name: string;
  /**
   * Description of the guardrail
   */
  description?: string | null | undefined;
  /**
   * Spending limit in USD
   */
  limitUsd?: number | null | undefined;
  /**
   * Interval at which the limit resets (daily, weekly, monthly)
   */
  resetInterval?: CreateGuardrailResetIntervalRequest | null | undefined;
  /**
   * List of allowed provider IDs
   */
  allowedProviders?: Array<string> | null | undefined;
  /**
   * Array of model identifiers (slug or canonical_slug accepted)
   */
  allowedModels?: Array<string> | null | undefined;
  /**
   * Whether to enforce zero data retention
   */
  enforceZdr?: boolean | null | undefined;
};

export type CreateGuardrailRequest = {
  /**
   * The app identifier should be your app's URL and is used as the primary identifier for rankings.
   *
   * @remarks
   * This is used to track API usage per application.
   */
  httpReferer?: string | undefined;
  /**
   * The app display name allows you to customize how your app appears in OpenRouter's dashboard.
   *
   * @remarks
   */
  xTitle?: string | undefined;
  requestBody: CreateGuardrailRequestBody;
};

/**
 * Interval at which the limit resets (daily, weekly, monthly)
 */
export const CreateGuardrailResetIntervalResponse = {
  Daily: "daily",
  Weekly: "weekly",
  Monthly: "monthly",
} as const;
/**
 * Interval at which the limit resets (daily, weekly, monthly)
 */
export type CreateGuardrailResetIntervalResponse = OpenEnum<
  typeof CreateGuardrailResetIntervalResponse
>;

/**
 * The created guardrail
 */
export type CreateGuardrailData = {
  /**
   * Unique identifier for the guardrail
   */
  id: string;
  /**
   * Name of the guardrail
   */
  name: string;
  /**
   * Description of the guardrail
   */
  description?: string | null | undefined;
  /**
   * Spending limit in USD
   */
  limitUsd?: number | null | undefined;
  /**
   * Interval at which the limit resets (daily, weekly, monthly)
   */
  resetInterval?: CreateGuardrailResetIntervalResponse | null | undefined;
  /**
   * List of allowed provider IDs
   */
  allowedProviders?: Array<string> | null | undefined;
  /**
   * Array of model canonical_slugs (immutable identifiers)
   */
  allowedModels?: Array<string> | null | undefined;
  /**
   * Whether to enforce zero data retention
   */
  enforceZdr?: boolean | null | undefined;
  /**
   * ISO 8601 timestamp of when the guardrail was created
   */
  createdAt: string;
  /**
   * ISO 8601 timestamp of when the guardrail was last updated
   */
  updatedAt?: string | null | undefined;
};

/**
 * Guardrail created successfully
 */
export type CreateGuardrailResponse = {
  /**
   * The created guardrail
   */
  data: CreateGuardrailData;
};

/** @internal */
export const CreateGuardrailResetIntervalRequest$outboundSchema: z.ZodType<
  string,
  CreateGuardrailResetIntervalRequest
> = openEnums.outboundSchema(CreateGuardrailResetIntervalRequest);

/** @internal */
export type CreateGuardrailRequestBody$Outbound = {
  name: string;
  description?: string | null | undefined;
  limit_usd?: number | null | undefined;
  reset_interval?: string | null | undefined;
  allowed_providers?: Array<string> | null | undefined;
  allowed_models?: Array<string> | null | undefined;
  enforce_zdr?: boolean | null | undefined;
};

/** @internal */
export const CreateGuardrailRequestBody$outboundSchema: z.ZodType<
  CreateGuardrailRequestBody$Outbound,
  CreateGuardrailRequestBody
> = z.object({
  name: z.string(),
  description: z.nullable(z.string()).optional(),
  limitUsd: z.nullable(z.number()).optional(),
  resetInterval: z.nullable(CreateGuardrailResetIntervalRequest$outboundSchema)
    .optional(),
  allowedProviders: z.nullable(z.array(z.string())).optional(),
  allowedModels: z.nullable(z.array(z.string())).optional(),
  enforceZdr: z.nullable(z.boolean()).optional(),
}).transform((v) => {
  return remap$(v, {
    limitUsd: "limit_usd",
    resetInterval: "reset_interval",
    allowedProviders: "allowed_providers",
    allowedModels: "allowed_models",
    enforceZdr: "enforce_zdr",
  });
});

export function createGuardrailRequestBodyToJSON(
  createGuardrailRequestBody: CreateGuardrailRequestBody,
): string {
  return JSON.stringify(
    CreateGuardrailRequestBody$outboundSchema.parse(createGuardrailRequestBody),
  );
}

/** @internal */
export type CreateGuardrailRequest$Outbound = {
  "HTTP-Referer"?: string | undefined;
  "X-Title"?: string | undefined;
  RequestBody: CreateGuardrailRequestBody$Outbound;
};

/** @internal */
export const CreateGuardrailRequest$outboundSchema: z.ZodType<
  CreateGuardrailRequest$Outbound,
  CreateGuardrailRequest
> = z.object({
  httpReferer: z.string().optional(),
  xTitle: z.string().optional(),
  requestBody: z.lazy(() => CreateGuardrailRequestBody$outboundSchema),
}).transform((v) => {
  return remap$(v, {
    httpReferer: "HTTP-Referer",
    xTitle: "X-Title",
    requestBody: "RequestBody",
  });
});

export function createGuardrailRequestToJSON(
  createGuardrailRequest: CreateGuardrailRequest,
): string {
  return JSON.stringify(
    CreateGuardrailRequest$outboundSchema.parse(createGuardrailRequest),
  );
}

/** @internal */
export const CreateGuardrailResetIntervalResponse$inboundSchema: z.ZodType<
  CreateGuardrailResetIntervalResponse,
  unknown
> = openEnums.inboundSchema(CreateGuardrailResetIntervalResponse);

/** @internal */
export const CreateGuardrailData$inboundSchema: z.ZodType<
  CreateGuardrailData,
  unknown
> = z.object({
  id: z.string(),
  name: z.string(),
  description: z.nullable(z.string()).optional(),
  limit_usd: z.nullable(z.number()).optional(),
  reset_interval: z.nullable(CreateGuardrailResetIntervalResponse$inboundSchema)
    .optional(),
  allowed_providers: z.nullable(z.array(z.string())).optional(),
  allowed_models: z.nullable(z.array(z.string())).optional(),
  enforce_zdr: z.nullable(z.boolean()).optional(),
  created_at: z.string(),
  updated_at: z.nullable(z.string()).optional(),
}).transform((v) => {
  return remap$(v, {
    "limit_usd": "limitUsd",
    "reset_interval": "resetInterval",
    "allowed_providers": "allowedProviders",
    "allowed_models": "allowedModels",
    "enforce_zdr": "enforceZdr",
    "created_at": "createdAt",
    "updated_at": "updatedAt",
  });
});

export function createGuardrailDataFromJSON(
  jsonString: string,
): SafeParseResult<CreateGuardrailData, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CreateGuardrailData$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CreateGuardrailData' from JSON`,
  );
}

/** @internal */
export const CreateGuardrailResponse$inboundSchema: z.ZodType<
  CreateGuardrailResponse,
  unknown
> = z.object({
  data: z.lazy(() => CreateGuardrailData$inboundSchema),
});

export function createGuardrailResponseFromJSON(
  jsonString: string,
): SafeParseResult<CreateGuardrailResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CreateGuardrailResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CreateGuardrailResponse' from JSON`,
  );
}
