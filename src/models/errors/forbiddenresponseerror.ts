/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: d08a9d9ee588
 */

import * as z from 'zod/v4';
import { remap as remap$ } from '../../lib/primitives.js';
import * as models from '../index.js';
import { OpenRouterError } from './openroutererror.js';

/**
 * Forbidden - Authentication successful but insufficient permissions
 */
export type ForbiddenResponseErrorData = {
  /**
   * Error data for ForbiddenResponse
   */
  error: models.ForbiddenResponseErrorData;
  userId?: string | null | undefined;
};

/**
 * Forbidden - Authentication successful but insufficient permissions
 */
export class ForbiddenResponseError extends OpenRouterError {
  /**
   * Error data for ForbiddenResponse
   */
  error: models.ForbiddenResponseErrorData;
  userId?: string | null | undefined;

  /** The original data that was passed to this error instance. */
  data$: ForbiddenResponseErrorData;

  constructor(
    err: ForbiddenResponseErrorData,
    httpMeta: {
      response: Response;
      request: Request;
      body: string;
    },
  ) {
    const message = err.error?.message || `API error occurred: ${JSON.stringify(err)}`;
    super(message, httpMeta);
    this.data$ = err;
    this.error = err.error;
    if (err.userId != null) this.userId = err.userId;

    this.name = 'ForbiddenResponseError';
  }
}

/** @internal */
export const ForbiddenResponseError$inboundSchema: z.ZodType<ForbiddenResponseError, unknown> = z
  .object({
    error: models.ForbiddenResponseErrorData$inboundSchema,
    user_id: z.nullable(z.string()).optional(),
    request$: z.custom<Request>((x) => x instanceof Request),
    response$: z.custom<Response>((x) => x instanceof Response),
    body$: z.string(),
  })
  .transform((v) => {
    const remapped = remap$(v, {
      user_id: 'userId',
    });

    return new ForbiddenResponseError(remapped, {
      request: v.request$,
      response: v.response$,
      body: v.body$,
    });
  });
