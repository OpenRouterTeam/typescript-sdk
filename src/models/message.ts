/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 34645e53d993
 */

import * as z from "zod/v4";
import {
  AssistantMessage,
  AssistantMessage$Outbound,
  AssistantMessage$outboundSchema,
} from "./assistantmessage.js";
import {
  DeveloperMessage,
  DeveloperMessage$Outbound,
  DeveloperMessage$outboundSchema,
} from "./developermessage.js";
import {
  SystemMessage,
  SystemMessage$Outbound,
  SystemMessage$outboundSchema,
} from "./systemmessage.js";
import {
  ToolResponseMessage,
  ToolResponseMessage$Outbound,
  ToolResponseMessage$outboundSchema,
} from "./toolresponsemessage.js";
import {
  UserMessage,
  UserMessage$Outbound,
  UserMessage$outboundSchema,
} from "./usermessage.js";

/**
 * Chat completion message with role-based discrimination
 */
export type Message =
  | SystemMessage
  | UserMessage
  | DeveloperMessage
  | (AssistantMessage & { role: "assistant" })
  | ToolResponseMessage;

/** @internal */
export type Message$Outbound =
  | SystemMessage$Outbound
  | UserMessage$Outbound
  | DeveloperMessage$Outbound
  | (AssistantMessage$Outbound & { role: "assistant" })
  | ToolResponseMessage$Outbound;

/** @internal */
export const Message$outboundSchema: z.ZodType<Message$Outbound, Message> = z
  .union([
    SystemMessage$outboundSchema,
    UserMessage$outboundSchema,
    DeveloperMessage$outboundSchema,
    AssistantMessage$outboundSchema.and(
      z.object({ role: z.literal("assistant") }),
    ),
    ToolResponseMessage$outboundSchema,
  ]);

export function messageToJSON(message: Message): string {
  return JSON.stringify(Message$outboundSchema.parse(message));
}
