/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: eed686a58eb1
 */

import type { Result as SafeParseResult } from '../types/fp.js';
import type { SDKValidationError } from './errors/sdkvalidationerror.js';

import * as z from 'zod/v4';
import { remap as remap$ } from '../lib/primitives.js';
import { safeParse } from '../lib/schemas.js';

export type TopLogprob = {
  token: string;
  logprob: number;
  bytes: Array<number> | null;
};

export type ChatMessageTokenLogprob = {
  token: string;
  logprob: number;
  bytes: Array<number> | null;
  topLogprobs: Array<TopLogprob>;
};

/** @internal */
export const TopLogprob$inboundSchema: z.ZodType<TopLogprob, unknown> = z.object({
  token: z.string(),
  logprob: z.number(),
  bytes: z.nullable(z.array(z.number())),
});

export function topLogprobFromJSON(
  jsonString: string,
): SafeParseResult<TopLogprob, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => TopLogprob$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'TopLogprob' from JSON`,
  );
}

/** @internal */
export const ChatMessageTokenLogprob$inboundSchema: z.ZodType<ChatMessageTokenLogprob, unknown> = z
  .object({
    token: z.string(),
    logprob: z.number(),
    bytes: z.nullable(z.array(z.number())),
    top_logprobs: z.array(z.lazy(() => TopLogprob$inboundSchema)),
  })
  .transform((v) => {
    return remap$(v, {
      top_logprobs: 'topLogprobs',
    });
  });

export function chatMessageTokenLogprobFromJSON(
  jsonString: string,
): SafeParseResult<ChatMessageTokenLogprob, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ChatMessageTokenLogprob$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ChatMessageTokenLogprob' from JSON`,
  );
}
